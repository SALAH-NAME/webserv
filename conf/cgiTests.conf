client_max_body_size 10M;

connection_timeout 60;


cgi_timeout 60;

index index.html index.htm;

error_log /logs/error.log;

access_log /logs/access.log;

# error_page 400 /error/400.html;
# error_page 401 /error/401.html;
# error_page 403 /error/403.html;
# error_page 404 /error/404.html;
# error_page 500 501 /error/50x.html;
error_page 502 /home/karim/Desktop/CGI_tests/502.html;

server { # Default server
    # Server identification
    listen 8080;                              # REQUIRED: Port to listen on (Range: 1-65535)
    host 127.0.0.1;                           # REQUIRED: Host IP address
    
    server_name example.com www.example.com;  # Server names
    
    error_page 404 /custom_errors/404.html;
    # error_page 500 502 503 504 /custom_errors/50x.html;

    client_max_body_size 20M;
    
    # Root location block
    location / { # Root location
        # ("Define a directory or a file from where the file should be searched")
        root /home/karim/Desktop;                   # Root directory path
        
        # (Optional: "Set a default file to answer if the request is a directory")
				# Default if omitted: index.html
        index index.html index.htm;
        
        # ("Define a list of accepted HTTP methods for the route")
        # Format: allowed_methods [METHOD1] [METHOD2] [...];
        # Valid values: GET, POST, DELETE
        allowed_methods GET POST DELETE;      # Subject requires GET, POST, DELETE
        
        # ("Turn on or off directory listing")
        # Values: on, off
        # Default if omitted: off
        autoindex off;                        # Directory listing disabled
    }

    # Python CGI
    location ~ .py {
        root /home/karim/Desktop/CGI_tests;                    # Root directory path
        allowed_methods GET POST;             # Allowed methods for CGI
        cgi_pass /usr/bin/python3;            # REQUIRED: Path to Python interpreter
    }
}
